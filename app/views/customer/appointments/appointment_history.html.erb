<%= stylesheet_link_tag :appointment_history %>

<br>
<%= link_to 'Home' , welcome_path %>
<br />

<h2>Appointment history</h2>


<h4>Upcoming Appointments</h4>

<table>
  <tr>
    <th>Date</th>
    <th>Time</th>
    <th>Service</th>
    <th>Staff</th>
    <th>Cancel</th>
  </tr>

  <% @future_appointments.each do |appointment| %>
    
    <tr class='greenify'>
      <td class="list_description">
        <%= appointment.starttime.strftime("%d/%m/%y %A") %>
      </td>
      <td class="list_description">
        <%= appointment.starttime.strftime("%I:%M %p") %> - <%= appointment.endtime.strftime("%I:%M %p") %>
      </td>
      <td class="list_description">
        <% if appointment.service %>
          <%= appointment.service.name %>
        <% else %>
          no service
        <% end %>
      </td>
      <td class="list_description">
        <% if appointment.staff %> 
         <%= appointment.staff.name %>
        <% else %>
          No staff
        <% end %>
      </td>
      <td>
        <%= link_to 'Cancel', cancel_list_customer_appointment_path(appointment), data: { confirm: 'Are you sure?' }, remote: true %>
      </td>
    </tr>
  <% end %>
</table>
<br/>
<br />
<div id = 'cancellation-form'></div>

<h4>Past Appointments</h4>

<table>
  <tr>
    <th>Date</th>
    <th>Time</th>
    <th>Service</th>
    <th>Staff</th>
  </tr>

  <% @past_appointments.each do |appointment| %>
    
    <tr class='redify'>
      <td class="list_description">
        <%= appointment.starttime.strftime("%d/%m/%y %A") %>
      </td>
      <td class="list_description">
        <%= appointment.starttime.strftime("%I:%M %p") %> - <%= appointment.endtime.strftime("%I:%M %p") %>
      </td>
      <td class="list_description">
        <%= appointment.service.name %>
      </td>
      <td class="list_description">
        <%= appointment.staff.name %>
      </td>
    </tr>
  <% end %>

</table>
<br/>